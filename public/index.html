<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Outcast SMP - Modded Anarchy Server</title>
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <h1>Outcast SMP</h1>
            </div>
            <ul class="nav-menu">
                <li><a href="./">Home</a></li>
                <li><a href="./knowledge">Knowledge Bank</a></li>
            </ul>
        </div>
    </nav>

    <main class="main-content">
        <section class="hero">
            <div class="hero-content">
                <h1 class="hero-title">Welcome to Outcast SMP</h1>
                <p class="hero-subtitle">Modded Anarchy Server for Minecraft Java 1.21.7</p>
                <p class="hero-description">
                    Experience modded anarchy in a controlled environment. 
                    Fair play rules ensure everyone has a great time while chaos reigns!
                </p>
                
                <div id="countdown-container" class="countdown-container">
                    <h2 class="countdown-title">ðŸš€ Server Launch Countdown</h2>
                    <div id="countdown" class="countdown-grid">
                        <div class="countdown-item">
                            <div class="countdown-value" id="days">00</div>
                            <div class="countdown-label">Days</div>
                        </div>
                        <div class="countdown-item">
                            <div class="countdown-value" id="hours">00</div>
                            <div class="countdown-label">Hours</div>
                        </div>
                        <div class="countdown-item">
                            <div class="countdown-value" id="minutes">00</div>
                            <div class="countdown-label">Minutes</div>
                        </div>
                        <div class="countdown-item">
                            <div class="countdown-value" id="seconds">00</div>
                            <div class="countdown-label">Seconds</div>
                        </div>
                    </div>
                </div>
                
                <div class="cta-buttons">
                    <a href="https://discord.gg/jm45RBY7" target="_blank" class="btn btn-discord">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"/>
                        </svg>
                        Join Discord Server
                    </a>
                    <a href="./knowledge" class="btn btn-secondary">Knowledge Bank</a>
                </div>
            </div>
        </section>

        <section class="info-section">
            <div class="container">
                <h2>Server Information</h2>
                <div class="info-grid">
                    <div class="info-card server-status-card">
                        <h3>Server Status</h3>
                        <div id="server-status">
                            <div class="status-loading">
                                <div class="status-indicator status-checking"></div>
                                <span>Checking...</span>
                            </div>
                        </div>
                        <div id="server-details" style="display: none; margin-top: 1rem;">
                            <p id="online-count" style="font-size: 0.9rem; color: var(--text-secondary);"></p>
                        </div>
                    </div>
                    <div class="info-card">
                        <h3>Server IP</h3>
                        <p style="font-family: 'Courier New', monospace; font-size: 1rem;">15.235.159.106:25600</p>
                    </div>
                    <div class="info-card">
                        <h3>Version</h3>
                        <p>Minecraft Java 1.21.7</p>
                    </div>
                    <div class="info-card">
                        <h3>Server Type</h3>
                        <p>Modded Anarchy</p>
                    </div>
                    <div class="info-card">
                        <h3>Rules</h3>
                        <p><a href="./knowledge/rules" style="color: var(--orange-light); text-decoration: none;">View Server Rules â†’</a></p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Outcast SMP. All rights reserved.</p>
            <p style="margin-top: 0.5rem; font-size: 0.9rem;">
                Website by <a href="https://digitaldumpster.xyz" target="_blank" style="color: var(--orange-light); text-decoration: none;">ar1stika</a>
            </p>
        </div>
    </footer>

    <script>
        // Countdown to server launch at 2pm AEST (Australia/Brisbane timezone)
        function updateCountdown() {
            const now = new Date();
            
            // Get current time in Brisbane timezone
            const brisbaneParts = new Intl.DateTimeFormat('en-US', {
                timeZone: 'Australia/Brisbane',
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            }).formatToParts(now);
            
            const year = parseInt(brisbaneParts.find(p => p.type === 'year').value);
            const month = parseInt(brisbaneParts.find(p => p.type === 'month').value) - 1;
            const day = parseInt(brisbaneParts.find(p => p.type === 'day').value);
            const hour = parseInt(brisbaneParts.find(p => p.type === 'hour').value);
            const minute = parseInt(brisbaneParts.find(p => p.type === 'minute').value);
            const second = parseInt(brisbaneParts.find(p => p.type === 'second').value);
            
            // Create target: 2pm today in Brisbane timezone
            let targetBrisbaneStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}T14:00:00`;
            
            // If already past 2pm, target tomorrow
            if (hour > 14 || (hour === 14 && minute >= 0)) {
                const tomorrow = new Date(year, month, day + 1);
                targetBrisbaneStr = `${tomorrow.getFullYear()}-${String(tomorrow.getMonth() + 1).padStart(2, '0')}-${String(tomorrow.getDate()).padStart(2, '0')}T14:00:00`;
            }
            
            // Convert Brisbane time to UTC
            // Brisbane is always AEST (UTC+10), no daylight saving
            const brisbaneOffset = new Date(now.toLocaleString('en-US', { timeZone: 'Australia/Brisbane' }));
            const utcOffset = new Date(now.toLocaleString('en-US', { timeZone: 'UTC' }));
            const offsetHours = (brisbaneOffset.getTime() - utcOffset.getTime()) / (1000 * 60 * 60);
            
            // Create target with correct offset
            const targetDateParts = targetBrisbaneStr.split('T');
            const dateParts = targetDateParts[0].split('-');
            const timeParts = targetDateParts[1].split(':');
            
            // Create UTC date by subtracting offset (Brisbane is UTC+10)
            const targetUTC = new Date(Date.UTC(
                parseInt(dateParts[0]),
                parseInt(dateParts[1]) - 1,
                parseInt(dateParts[2]),
                parseInt(timeParts[0]) - Math.floor(offsetHours),
                parseInt(timeParts[1]),
                parseInt(timeParts[2])
            ));
            
            const difference = targetUTC - now;
            
            if (difference > 0) {
                const days = Math.floor(difference / (1000 * 60 * 60 * 24));
                const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((difference % (1000 * 60)) / 1000);
                
                if (document.getElementById('days')) {
                    document.getElementById('days').textContent = String(days).padStart(2, '0');
                    document.getElementById('hours').textContent = String(hours).padStart(2, '0');
                    document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
                    document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');
                }
            } else {
                const container = document.getElementById('countdown-container');
                if (container) {
                    container.innerHTML = '<h2 style="font-size: 1.5rem; color: var(--orange-light);">ðŸŽ‰ Server is Live!</h2><p>Join now and start your adventure!</p>';
                }
            }
        }
        
        // Update every second
        if (document.getElementById('countdown-container')) {
            updateCountdown();
            setInterval(updateCountdown, 1000);
        }

        // Server Status Widget
        async function updateServerStatus() {
            const statusDiv = document.getElementById('server-status');
            const detailsDiv = document.getElementById('server-details');
            const onlineCount = document.getElementById('online-count');
            
            if (!statusDiv) return;
            
            try {
                // Using mcstatus.io API - free and works on static sites
                // Format: https://api.mcstatus.io/v2/status/java/{host}:{port}
                const response = await fetch('https://api.mcstatus.io/v2/status/java/15.235.159.106:25600');
                const data = await response.json();
                
                if (data.online) {
                    statusDiv.innerHTML = `
                        <div class="status-online">
                            <div class="status-indicator status-online-indicator"></div>
                            <span style="color: #00FF00;">Online</span>
                        </div>
                    `;
                    
                    if (data.players && data.players.online !== undefined) {
                        const maxPlayers = data.players.max || '?';
                        onlineCount.textContent = `${data.players.online} / ${maxPlayers} players online`;
                        detailsDiv.style.display = 'block';
                    }
                } else {
                    statusDiv.innerHTML = `
                        <div class="status-offline">
                            <div class="status-indicator status-offline-indicator"></div>
                            <span style="color: var(--red-light);">Offline</span>
                        </div>
                    `;
                    detailsDiv.style.display = 'none';
                }
            } catch (error) {
                // Fallback if API fails
                statusDiv.innerHTML = `
                    <div class="status-offline">
                        <div class="status-indicator status-offline-indicator"></div>
                        <span style="color: var(--red-light);">Unable to check</span>
                    </div>
                `;
                detailsDiv.style.display = 'none';
            }
        }

        // Update server status on load and every 30 seconds
        if (document.getElementById('server-status')) {
            updateServerStatus();
            setInterval(updateServerStatus, 30000); // Update every 30 seconds
        }
    </script>
</body>
</html>

